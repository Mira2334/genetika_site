<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ì–µ–Ω–µ—Ç–∏–∫–∞ —á–µ–ª–æ–≤–µ–∫–∞ ‚Äî —É—á–µ–±–Ω—ã–π —Å–∞–π—Ç</title>
  <style>
    :root{--accent:#7fc242;--dark:#234;--glass:rgba(255,255,255,0.85)}
    *{box-sizing:border-box;font-family:Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    body{margin:0;min-height:100vh;background:#eaf7e6;display:flex;flex-direction:column}
    header{background:linear-gradient(180deg,var(--accent),#9ad76a);padding:18px 30px;display:flex;gap:18px;align-items:center}
    .logo{font-weight:800;color:#fff;font-size:20px}
    nav{margin-left:auto;display:flex;gap:12px}
    .tab{background:rgba(255,255,255,0.15);padding:10px 16px;border-radius:30px;color:#083;cursor:pointer;font-weight:700;display:flex;gap:8px;align-items:center}
    .tab.active{background:var(--glass);color:var(--dark);box-shadow:0 6px 18px rgba(0,0,0,0.12)}

    main{flex:1;display:flex;align-items:stretch}
    .pane{flex:1;padding:28px;overflow:auto;min-height:520px}

    /* background images for panes (place your images in same folder) */
    #theory{background-image:url('theory_image.jpg..png');background-size:cover;background-position:center}
    #tasks{background-image:url('tasks_image.jpg..png');background-size:cover;background-position:center}
    #test{background-image:url('test_image.jpg');background-size:cover;background-position:center}
    #homework{background:linear-gradient(180deg,#fff,#f3fff0)}

    /* content card overlay */
    .card{background:rgba(255,255,255,0.95);backdrop-filter:blur(6px);padding:20px;border-radius:14px;max-width:1000px;margin:auto;box-shadow:0 12px 30px rgba(25,40,20,0.12)}
    h1{margin:0 0 8px 0;color:#185}
    p,li{color:#133;line-height:1.45}
    ul{padding-left:18px}

    /* tasks area */
    .task-list{display:flex;flex-direction:column;gap:10px}
    .task{background:#fff;border-radius:8px;padding:12px;border:1px solid #e6f0e6}
    .btn{background:var(--accent);border:none;padding:10px 16px;border-radius:10px;color:white;font-weight:700;cursor:pointer}
    .btn.secondary{background:#6fb03c}

    /* test UI */
    .test-controls{display:flex;gap:10px;align-items:center;margin-bottom:14px}
    input[type=text]{padding:10px;border-radius:8px;border:1px solid #cfe5c9;min-width:220px}
    .variant{display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border-radius:10px;background:rgba(0,0,0,0.06);cursor:pointer}
    .variant.selected{outline:3px solid rgba(127,194,66,0.25)}
    .timer{font-weight:800;color:#155}
    .questions{margin-top:12px}
    .question{margin:12px 0;padding:10px;border-radius:8px;background:#fbfff9;border:1px solid #e6f4e2}

    /* disabled look */
    .disabled{opacity:0.6;pointer-events:none}

    /* canvas homework */
    #drawCanvas{border:2px dashed #cfe5c9;border-radius:8px;background:#fff}
    .tools{display:flex;gap:8px;align-items:center;margin:10px 0}

    footer{padding:12px 20px;text-align:center;color:#214;opacity:0.9}

    @media(max-width:880px){.card{padding:14px;margin:12px}nav{display:flex;flex-wrap:wrap}}
  </style>
</head>
<body>
  <header>
    <div class="logo">–ì–µ–Ω–µ—Ç–∏–∫–∞ —á–µ–ª–æ–≤–µ–∫–∞ ‚Äî –º–µ—Ç–æ–¥—ã</div>
    <nav>
      <div class="tab active" data-target="theory">–¢–µ–æ—Ä–∏—è</div>
      <div class="tab" data-target="tasks">–ó–∞–¥–∞–Ω–∏—è</div>
      <div class="tab" data-target="test">–¢–µ—Å—Ç</div>
      <div class="tab" data-target="homework">–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ</div>
    </nav>
  </header>

  <main>
    <section id="theory" class="pane">
      <div class="card">
        <h1>1. –ì–µ–Ω–µ—Ç–∏–∫–∞ —á–µ–ª–æ–≤–µ–∫–∞</h1>
        <p>–ì–µ–Ω–µ—Ç–∏–∫–∞ —á–µ–ª–æ–≤–µ–∫–∞ ‚Äî —ç—Ç–æ –Ω–∞—É–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –∏–∑—É—á–∞–µ—Ç –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∏ –∏–∑–º–µ–Ω—á–∏–≤–æ—Å—Ç—å —É —á–µ–ª–æ–≤–µ–∫–∞. –û–Ω–∞ –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ –ø—Ä–∏–∑–Ω–∞–∫–∏ –∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏–∑ –ø–æ–∫–æ–ª–µ–Ω–∏—è –≤ –ø–æ–∫–æ–ª–µ–Ω–∏–µ, –ø–æ—á–µ–º—É –º—ã –ø–æ—Ö–æ–∂–∏ –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏ –≤ —á—ë–º –æ—Ç–ª–∏—á–∞–µ–º—Å—è.</p>
        <h3>–ì–ª–∞–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≥–µ–Ω–µ—Ç–∏–∫–∏ —á–µ–ª–æ–≤–µ–∫–∞:</h3>
        <ul>
          <li>–ø–æ–Ω—è—Ç—å, –∫–∞–∫ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –ø—Ä–∏–∑–Ω–∞–∫–∏;</li>
          <li>–≤—ã—è–≤–∏—Ç—å –≥–µ–Ω—ã, –æ—Ç–≤–µ—á–∞—é—â–∏–µ –∑–∞ –±–æ–ª–µ–∑–Ω–∏;</li>
          <li>—Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –º–µ—Ç–æ–¥—ã –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏ –∏ –ª–µ—á–µ–Ω–∏—è –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π;</li>
          <li>–∏–∑—É—á–∞—Ç—å –≤–ª–∏—è–Ω–∏–µ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã –∏ –º—É—Ç–∞—Ü–∏–π –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–º.</li>
        </ul>

        <hr>
        <h2>2. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–∑—É—á–µ–Ω–∏—è –≥–µ–Ω–µ—Ç–∏–∫–∏ —É —á–µ–ª–æ–≤–µ–∫–∞</h2>
        <p>–£ —á–µ–ª–æ–≤–µ–∫–∞ –Ω–µ–ª—å–∑—è —Å—Ç–∞–≤–∏—Ç—å –æ–ø—ã—Ç—ã, –∫–∞–∫ –Ω–∞ –¥—Ä–æ–∑–æ—Ñ–∏–ª–∞—Ö –∏–ª–∏ –º—ã—à–∞—Ö (–∏–∑ —ç—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏—á–∏–Ω, –¥–æ–ª–≥–∏–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª, –º–∞–ª–æ –ø–æ—Ç–æ–º–∫–æ–≤). –ü–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ—Å–≤–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.</p>

        <hr>
        <h2>3. –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –≥–µ–Ω–µ—Ç–∏–∫–∏ —á–µ–ª–æ–≤–µ–∫–∞</h2>
        <p>üîπ <strong>1) –ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥</strong><br>–°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ —Ä–æ–¥–æ—Å–ª–æ–≤–Ω—ã—Ö. –ü–æ–º–æ–≥–∞–µ—Ç –≤—ã—è—Å–Ω–∏—Ç—å, –∫–∞–∫ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –ø—Ä–∏–∑–Ω–∞–∫ –∏–ª–∏ –±–æ–ª–µ–∑–Ω—å (–¥–æ–º–∏–Ω–∞–Ω—Ç–Ω–æ, —Ä–µ—Ü–µ—Å—Å–∏–≤–Ω–æ, —Å—Ü–µ–ø–ª–µ–Ω–æ —Å –ø–æ–ª–æ–º).</p>
        <p>üîπ <strong>2) –ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π –º–µ—Ç–æ–¥</strong><br>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ—è–π—Ü–µ–≤—ã—Ö –∏ –¥–≤—É—è–π—Ü–µ–≤—ã—Ö –±–ª–∏–∑–Ω–µ—Ü–æ–≤. –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ –≤–∞–∂–Ω–µ–µ ‚Äî –≥–µ–Ω—ã –∏–ª–∏ —Å—Ä–µ–¥–∞.</p>
        <p>üîπ <strong>3) –¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥</strong><br>–ò–∑—É—á–µ–Ω–∏–µ —Ö—Ä–æ–º–æ—Å–æ–º –ø–æ–¥ –º–∏–∫—Ä–æ—Å–∫–æ–ø–æ–º. –ú–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è: –ª–∏—à–Ω–∏–µ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ö—Ä–æ–º–æ—Å–æ–º—ã, –∏—Ö –ø–æ–ª–æ–º–∫–∏.</p>
        <p>üîπ <strong>4) –ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥</strong><br>–ò–∑—É—á–µ–Ω–∏–µ –æ–±–º–µ–Ω–∞ –≤–µ—â–µ—Å—Ç–≤, —Ñ–µ—Ä–º–µ–Ω—Ç–æ–≤ –∏ –±–µ–ª–∫–æ–≤. –ü–æ–º–æ–≥–∞–µ—Ç –≤—ã—è–≤–∏—Ç—å –±–æ–ª–µ–∑–Ω–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∞—Ä—É—à–µ–Ω–∏–µ–º –æ–±–º–µ–Ω–∞.</p>
        <p>üîπ <strong>5) –ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω–æ-—Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥</strong><br>–ò–∑—É—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –≥–µ–Ω–æ–≤ –∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –≤ –ø–æ–ø—É–ª—è—Ü–∏–∏.</p>
        <p>üîπ <strong>6) –ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥</strong><br>–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ ‚Äî –∏–∑—É—á–µ–Ω–∏–µ –î–ù–ö. –ü–æ–∑–≤–æ–ª—è–µ—Ç ¬´—á–∏—Ç–∞—Ç—å¬ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥–µ–Ω–æ–≤, –Ω–∞—Ö–æ–¥–∏—Ç—å –º—É—Ç–∞—Ü–∏–∏.</p>
        <p>üîπ <strong>7) –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ)</strong><br>–ì–µ–Ω–æ—Ç–µ—Ä–∞–ø–∏—è, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–Ω–æ–≤ (CRISPR) –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–µ–¥–∏—Ü–∏–Ω–∞.</p>

        <hr>
        <h2>4. –ó–Ω–∞—á–µ–Ω–∏–µ –≥–µ–Ω–µ—Ç–∏–∫–∏ —á–µ–ª–æ–≤–µ–∫–∞</h2>
        <ul>
          <li>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –±–æ–ª–µ–∑–Ω–µ–π.</li>
          <li>–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ –∏ –ª–µ—á–µ–Ω–∏–µ (–≥–µ–Ω–æ—Ç–µ—Ä–∞–ø–∏—è).</li>
          <li>–ú–µ–¥–∏–∫–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–º–µ–π.</li>
          <li>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–µ–¥–∏—Ü–∏–Ω–∞ –±—É–¥—É—â–µ–≥–æ.</li>
        </ul>

        <p style="margin-top:12px">‚ú® <em>–ò—Å—Ç–æ—Ä–∏—è ¬´–ì–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥–∞–¥–∫–∞ –º–æ–µ–π —Å–µ–º—å–∏¬ª ‚Äî –Ω–µ–±–æ–ª—å—à–∞—è –∫–Ω–∏–≥–∞ –¥–ª—è –ª—é–±–æ–ø—ã—Ç–Ω—ã—Ö.</em> üëâ <a href="https://g.co/gemini/share/526c177efeef" target="_blank">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∏—Å—Ç–æ—Ä–∏–∏</a></p>
      </div>
    </section>

    <section id="tasks" class="pane" style="display:none">
      <div class="card">
        <h1>–ó–∞–¥–∞–Ω–∏—è</h1>
        <p>–í—ã–ø–æ–ª–Ω–∏ –∑–∞–¥–∞–Ω–∏—è. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –Ω–∞–∂–º—ë—à—å –∫–Ω–æ–ø–∫—É <strong>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</strong>, –ø–æ—è–≤—è—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã. –ü–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π ‚Äî —É—á–µ–Ω–∏–∫ –Ω–µ –≤–∏–¥–∏—Ç –æ—Ç–≤–µ—Ç—ã.</p>

        <h3>–ó–∞–¥–∞–Ω–∏–µ 1 ‚Äî –í–µ—Ä–Ω–æ –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω–æ (–æ—Ç–º–µ—Ç—å):</h3>
        <div class="task-list" id="task1-list">
          <!-- generate list -->
        </div>
        <button class="btn" id="check-task1">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
        <div id="task1-result" style="margin-top:8px"></div>

        <hr>
        <h3>–ó–∞–¥–∞–Ω–∏–µ 2 ‚Äî –°–æ–ø–æ—Å—Ç–∞–≤—å</h3>
        <p>–°–æ–µ–¥–∏–Ω–∏ –º–µ—Ç–æ–¥ –∏ –µ–≥–æ –æ–ø–∏—Å–∞–Ω–∏–µ (–≤—ã–±–µ—Ä–∏ –±—É–∫–≤—É):</p>
        <div class="task">
          <ol>
            <li>–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π ‚Äî <select id="m1"><option value="">?</option><option value="a">–∞</option><option value="b">–±</option><option value="c">–≤</option><option value="d">–≥</option><option value="e">–¥</option></select></li>
            <li>–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π ‚Äî <select id="m2"><option value="">?</option><option value="a">–∞</option><option value="b">–±</option><option value="c">–≤</option><option value="d">–≥</option><option value="e">–¥</option></select></li>
            <li>–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π ‚Äî <select id="m3"><option value="">?</option><option value="a">–∞</option><option value="b">–±</option><option value="c">–≤</option><option value="d">–≥</option><option value="e">–¥</option></select></li>
            <li>–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π ‚Äî <select id="m4"><option value="">?</option><option value="a">–∞</option><option value="b">–±</option><option value="c">–≤</option><option value="d">–≥</option><option value="e">–¥</option></select></li>
            <li>–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π ‚Äî <select id="m5"><option value="">?</option><option value="a">–∞</option><option value="b">–±</option><option value="c">–≤</option><option value="d">–≥</option><option value="e">–¥</option></select></li>
          </ol>
        </div>
        <button class="btn secondary" id="check-task2">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ</button>
        <div id="task2-result" style="margin-top:8px"></div>

        <hr>
        <h3>–ó–∞–¥–∞–Ω–∏–µ 3 ‚Äî –í—Å—Ç–∞–≤—å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞:</h3>
        <div class="task">
          <ol>
            <li>–ú–µ—Ç–æ–¥ –∏–∑—É—á–µ–Ω–∏—è —Ä–æ–¥–æ—Å–ª–æ–≤–Ω—ã—Ö –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è <input id="fill1"></li>
            <li>–°–∏–Ω–¥—Ä–æ–º –î–∞—É–Ω–∞ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å –ø–æ–º–æ—â—å—é <input id="fill2"></li>
            <li>–î–ª—è –≤—ã—è—Å–Ω–µ–Ω–∏—è —Ä–æ–ª–∏ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å—Ä–µ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç <input id="fill3"></li>
            <li>–ò–∑—É—á–µ–Ω–∏–µ —Ñ–µ—Ä–º–µ–Ω—Ç–æ–≤ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è —Å –ø–æ–º–æ—â—å—é <input id="fill4"></li>
            <li>–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –î–ù–ö –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è <input id="fill5"></li>
          </ol>
        </div>
        <button class="btn" id="check-task3">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ</button>
        <div id="task3-result" style="margin-top:8px"></div>

      </div>
    </section>

    <section id="test" class="pane" style="display:none">
      <div class="card">
        <h1>–¢–µ—Å—Ç ‚Äî –º–µ—Ç–æ–¥—ã –≥–µ–Ω–µ—Ç–∏–∫–∏ —á–µ–ª–æ–≤–µ–∫–∞</h1>
        <p><strong>–ü—Ä–∞–≤–∏–ª–æ:</strong> –≤—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç (1 –∏–ª–∏ 2), –≤–≤–µ–¥–∏ —Å–≤–æ—ë –∏–º—è –∏ –Ω–∞–∂–º–∏ <em>–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç</em>. –ù–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Äî 3 –º–∏–Ω—É—Ç—ã. –ö–æ–≥–¥–∞ –≤—Ä–µ–º—è –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è ‚Äî –æ—Ç–≤–µ—Ç—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –∏ —Ç–µ—Å—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–º. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏) –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ø—Ä–æ—Ö–æ–¥ –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω.</p>

        <div class="test-controls">
          <div class="variant" data-variant="1">–í–∞—Ä–∏–∞–Ω—Ç 1</div>
          <div class="variant" data-variant="2">–í–∞—Ä–∏–∞–Ω—Ç 2</div>
          <input type="text" id="student-name" placeholder="–ò–º—è:" />
          <button class="btn" id="start-test">–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç</button>
          <div class="timer" id="timer">03:00</div>
        </div>

        <div id="test-area" class="questions disabled">
          <!-- questions inserted by script -->
        </div>

        <div style="margin-top:12px;display:flex;gap:10px;align-items:center">
          <button class="btn secondary" id="submit-test">–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
          <div id="test-result"></div>
        </div>

      </div>
    </section>

    <section id="homework" class="pane" style="display:none">
      <div class="card">
        <h1>–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ</h1>
        <p>–ù–∞—Ä–∏—Å—É–π –ø—Ä–æ—Å—Ç—É—é —Ä–æ–¥–æ—Å–ª–æ–≤–Ω—É—é (3 –ø–æ–∫–æ–ª–µ–Ω–∏—è) –∏ –ø–æ–∫–∞–∂–∏ –Ω–∞ –Ω–µ–π, –∫–∞–∫ –º–æ–∂–µ—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ–¥–∏–Ω –∏–∑ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤: –∫–∞—Ä–∏–µ –≥–ª–∞–∑–∞, –≥–µ–º–æ—Ñ–∏–ª–∏—è –∏–ª–∏ –¥–∞–ª—å—Ç–æ–Ω–∏–∑–º.</p>
        <p>–ù–∏–∂–µ ‚Äî –ø—Ä–æ—Å—Ç–∞—è –æ–±–ª–∞—Å—Ç—å —Ä–∏—Å–æ–≤–∞–Ω–∏—è, –≥–¥–µ –º–æ–∂–Ω–æ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å —Ä–æ–¥–æ—Å–ª–æ–≤–Ω—É—é –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.</p>

        <div class="tools">
          <label>–¢–æ–ª—â–∏–Ω–∞: <input id="thick" type="range" min="1" max="8" value="2"></label>
          <button class="btn" id="clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
          <button class="btn secondary" id="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∏—Å—É–Ω–æ–∫</button>
        </div>
        <canvas id="drawCanvas" width="900" height="380"></canvas>
        <p style="margin-top:10px">–ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –ø–æ–¥–ø–∏—Å–∞—Ç—å —Ñ–∞–º–∏–ª–∏–∏ –∏ –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä–µ–ª–∫–∞–º–∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ.</p>
      </div>
    </section>
  </main>

  <footer>–°–∞–π—Ç ‚Äî —É—á–µ–±–Ω—ã–π –º–∞–∫–µ—Ç. –†–∞–∑–º–µ—Å—Ç–∏ —Ñ–∞–π–ª—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ: <code>theory_image.jpg..png</code>, <code>tasks_image.jpg..png</code>, <code>test_image.jpg</code></footer>

  <script>
    // TAB SYSTEM
    const tabs = document.querySelectorAll('.tab');
    const panes = {theory:document.getElementById('theory'),tasks:document.getElementById('tasks'),test:document.getElementById('test'),homework:document.getElementById('homework')};
    tabs.forEach(t=>t.addEventListener('click',()=>{
      tabs.forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      for(const k in panes) panes[k].style.display='none';
      panes[t.dataset.target].style.display='block';
      // If test is started or completed ‚Äî keep test disabled for changing answers when switching
      testTabUpdateState();
    }));

    // TASK 1 content
    const task1Statements = [
      '–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–æ–¥–æ—Å–ª–æ–≤–Ω—ã—Ö.',
      '–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑—É—á–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ö—Ä–æ–º–æ—Å–æ–º —á–µ–ª–æ–≤–µ–∫–∞.',
      '–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º—É—Ç–∞—Ü–∏–π –≤ –î–ù–ö.',
      '–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –ø–æ–º–æ–≥–∞–µ—Ç –≤—ã—è–≤–∏—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è –æ–±–º–µ–Ω–∞ –≤–µ—â–µ—Å—Ç–≤.',
      '–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç ¬´—á–∏—Ç–∞—Ç—å¬ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –î–ù–ö.',
      '–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω–æ-—Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –∏–∑—É—á–∞–µ—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –≤ —Å–µ–º—å–µ.',
      '–°–∏–Ω–¥—Ä–æ–º –î–∞—É–Ω–∞ –º–æ–∂–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —Ü–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞.',
      '–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –ø–æ–º–æ–≥–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –±–æ–ª–µ–∑–Ω—å (–¥–æ–º–∏–Ω–∞–Ω—Ç–Ω–æ –∏–ª–∏ —Ä–µ—Ü–µ—Å—Å–∏–≤–Ω–æ).',
      '–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–≤–Ω–∏—Ç—å –≤–ª–∏—è–Ω–∏–µ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å—Ä–µ–¥—ã.',
      '–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–æ–¥–æ—Å–ª–æ–≤–Ω—ã—Ö.'
    ];
    const task1List = document.getElementById('task1-list');
    task1Statements.forEach((s,i)=>{
      const div = document.createElement('div');div.className='task';
      div.innerHTML = `<label><input type='radio' name='t1_${i}' value='true'> –í–µ—Ä–Ω–æ</label> <label style='margin-left:12px'><input type='radio' name='t1_${i}' value='false'> –ù–µ–≤–µ—Ä–Ω–æ</label><div style='margin-top:6px'>${i+1}. ${s}</div>`;
      task1List.appendChild(div);
    });

    // correct answers for tasks
    const task1Correct = [true,true,false,true,true,false,true,true,true,false];

    document.getElementById('check-task1').addEventListener('click',()=>{
      let ok=true,score=0;
      task1Statements.forEach((s,i)=>{
        const radios = document.getElementsByName('t1_'+i);
        let chosen = null; for(const r of radios) if(r.checked) chosen = r.value==='true';
        if(chosen===null) ok=false; else if(chosen===task1Correct[i]) score++;
      });
      if(!ok){ alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∑–∞–¥–∞–Ω–∏—è 1.'); return; }
      document.getElementById('task1-result').innerHTML = `–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${score} –∏–∑ ${task1Statements.length}.<br>–ü–æ—è—Å–Ω–µ–Ω–∏–µ: –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–∫–∞–∑–∞–Ω—ã –∑–µ–ª—ë–Ω—ã–º.`;
      // show correct marking
      task1Statements.forEach((s,i)=>{
        const radios = document.getElementsByName('t1_'+i);
        radios.forEach(r=>{ r.disabled=true; if((r.value==='true')===task1Correct[i]) r.parentElement.style.background='#e6ffee'; if(r.checked && (r.value==='true')!==task1Correct[i]) r.parentElement.style.background='#ffe6e6'; });
      });
    });

    // Task2 correct mapping: a) —Ä–æ–¥–æ—Å–ª–æ–≤–Ω—ã–µ, b) –±–ª–∏–∑–Ω–µ—Ü—ã, c) —Ö—Ä–æ–º–æ—Å–æ–º—ã, d) –æ–±–º–µ–Ω –≤–µ—â–µ—Å—Ç–≤, e) –î–ù–ö
    const t2correct = {m1:'a',m2:'b',m3:'c',m4:'d',m5:'e'};
    document.getElementById('check-task2').addEventListener('click',()=>{
      let all=true,score=0;
      for(const k in t2correct){
        const sel = document.getElementById(k);
        if(!sel.value) all=false; else if(sel.value===t2correct[k]) score++;
        sel.disabled=true;
      }
      if(!all){ alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è.'); }
      document.getElementById('task2-result').innerText = `–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö: ${score} –∏–∑ 5.`;
    });

    // Task3 answers
    const t3answers = ['–≥–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','—Ü–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ','–±–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–±–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–º–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–º'];
    document.getElementById('check-task3').addEventListener('click',()=>{
      let inputs=['fill1','fill2','fill3','fill4','fill5'].map(id=>document.getElementById(id));
      let all=true,score=0;
      inputs.forEach((el,i)=>{ if(!el.value.trim()) all=false; else { if(el.value.trim().toLowerCase().includes(t3answers[i].split('-')[0])) score++; } el.disabled=true; });
      if(!all) alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è.');
      document.getElementById('task3-result').innerText = `–ü—Ä–∏–º–µ—Ä–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö: ${score} –∏–∑ ${inputs.length}.`;
    });

    // TEST area
    const variantsEls = document.querySelectorAll('.variant');
    let selectedVariant = null;
    variantsEls.forEach(v=>v.addEventListener('click',()=>{variantsEls.forEach(x=>x.classList.remove('selected'));v.classList.add('selected');selectedVariant=v.dataset.variant;}));

    const questionsVariant1 = [
      {q:'–ù–∞—É–∫–∞, –∏–∑—É—á–∞—é—â–∞—è –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∏ –∏–∑–º–µ–Ω—á–∏–≤–æ—Å—Ç—å —É —á–µ–ª–æ–≤–µ–∫–∞:',opts:['–¶–∏—Ç–æ–ª–æ–≥–∏—è','–ì–µ–Ω–µ—Ç–∏–∫–∞','–ê–Ω–∞—Ç–æ–º–∏—è','–§–∏–∑–∏–æ–ª–æ–≥–∏—è'],a:1},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–µ —Ä–æ–¥–æ—Å–ª–æ–≤–Ω—ã—Ö?',opts:['–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π'],a:1},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –ø—Ä–∏–º–µ–Ω—è—é—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –≤–ª–∏—è–Ω–∏—è –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å—Ä–µ–¥—ã?',opts:['–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω—ã–π','–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã–π'],a:1},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑—É—á–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ö—Ä–æ–º–æ—Å–æ–º?',opts:['–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω–æ-—Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π'],a:2},
      {q:'–ú–µ—Ç–æ–¥, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –≤—ã—è–≤–∏—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è –æ–±–º–µ–Ω–∞ –≤–µ—â–µ—Å—Ç–≤:',opts:['–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã–π'],a:1},
      {q:'–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –∞–Ω–∞–ª–∏–∑–∞ –î–ù–ö:',opts:['–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π'],a:0},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –¥–æ–º–∏–Ω–∞–Ω—Ç–Ω–æ–≥–æ –∏–ª–∏ —Ä–µ—Ü–µ—Å—Å–∏–≤–Ω–æ–≥–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –±–æ–ª–µ–∑–Ω–∏?',opts:['–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π'],a:2},
      {q:'–°–∏–Ω–¥—Ä–æ–º –î–∞—É–Ω–∞ –≤—ã—è–≤–ª—è–µ—Ç—Å—è –º–µ—Ç–æ–¥–æ–º:',opts:['–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–º','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–º','–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã–º','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–º'],a:1},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —á–∞—Å—Ç–æ—Ç—ã –≥–µ–Ω–æ–≤ –≤ –ø–æ–ø—É–ª—è—Ü–∏–∏?',opts:['–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω–æ-—Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω—ã–π'],a:0},
      {q:'–ú–µ—Ç–æ–¥, —Å—Ä–∞–≤–Ω–∏–≤–∞—é—â–∏–π –æ–¥–Ω–æ—è–π—Ü–µ–≤—ã—Ö –∏ –¥–≤—É—è–π—Ü–µ–≤—ã—Ö –±–ª–∏–∑–Ω–µ—Ü–æ–≤:',opts:['–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π'],a:1},
      {q:'–ò–∑—É—á–µ–Ω–∏–µ —Ñ–µ—Ä–º–µ–Ω—Ç–æ–≤ –≤ –æ—Ä–≥–∞–Ω–∏–∑–º–µ –ø—Ä–æ–≤–æ–¥—è—Ç –º–µ—Ç–æ–¥–æ–º:',opts:['–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–º','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–º','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–º','–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã–º'],a:2},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –ø–æ–º–æ–≥–∞–µ—Ç –≤—ã—è–≤–∏—Ç—å –º—É—Ç–∞—Ü–∏–∏ –≤ –≥–µ–Ω–∞—Ö?',opts:['–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π'],a:1},
      {q:'–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –≥–µ–Ω–µ—Ç–∏–∫–∏ —á–µ–ª–æ–≤–µ–∫–∞ ‚Äî –∏–∑—É—á–µ–Ω–∏–µ:',opts:['–û–±–º–µ–Ω–∞ –≤–µ—â–µ—Å—Ç–≤','–ó–∞–∫–æ–Ω–æ–≤ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏','–°—Ç—Ä–æ–µ–Ω–∏—è –æ—Ä–≥–∞–Ω–æ–≤','–ú—ã—à–µ—á–Ω—ã—Ö —Ç–∫–∞–Ω–µ–π'],a:1},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–æ–ª–∏ —Å—Ä–µ–¥—ã –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π?',opts:['–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω—ã–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π'],a:1},
      {q:'–ö—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Å–Ω–æ–≤–∞—Ç–µ–ª–µ–º –≥–µ–Ω–µ—Ç–∏–∫–∏?',opts:['–î–∞—Ä–≤–∏–Ω','–ú–µ–Ω–¥–µ–ª—å','–í–∞–≤–∏–ª–æ–≤','–õ–∏–Ω–Ω–µ–π'],a:1},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –º–µ–¥–∏–∫–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–æ–º –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏?',opts:['–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π'],a:1},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–æ—Å–∏—Ç–µ–ª—å—Å—Ç–≤–æ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –±–æ–ª–µ–∑–Ω–µ–π –ø–æ –î–ù–ö?',opts:['–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π'],a:1},
      {q:'–ü—Ä–∏ –∫–∞–∫–æ–º —Å–∏–Ω–¥—Ä–æ–º–µ —É —á–µ–ª–æ–≤–µ–∫–∞ 47 —Ö—Ä–æ–º–æ—Å–æ–º?',opts:['–°–∏–Ω–¥—Ä–æ–º –î–∞—É–Ω–∞','–°–∏–Ω–¥—Ä–æ–º –¢–µ—Ä–Ω–µ—Ä–∞','–°–∏–Ω–¥—Ä–æ–º –ö–ª–∞–π–Ω—Ñ–µ–ª—å—Ç–µ—Ä–∞','–°–∏–Ω–¥—Ä–æ–º –≠–¥–≤–∞—Ä–¥—Å–∞'],a:0},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ —á–∞—â–µ –≤—Å–µ–≥–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –Ω–∞—Å–µ–ª–µ–Ω–∏—è?',opts:['–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω–æ-—Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π'],a:1},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ—Å–∏—Ç–µ–ª—å—Å—Ç–≤–æ –≥–µ–Ω–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –±–æ–ª–µ–∑–Ω—è–º–∏?',opts:['–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π'],a:2}
    ];

    const questionsVariant2 = [/* variant2 is similar ‚Äî for brevity some questions changed order */
      {q:'–ù–∞—É–∫–∞, –∏–∑—É—á–∞—é—â–∞—è –ø–µ—Ä–µ–¥–∞—á—É –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —É —á–µ–ª–æ–≤–µ–∫–∞:',opts:['–§–∏–∑–∏–æ–ª–æ–≥–∏—è','–ì–µ–Ω–µ—Ç–∏–∫–∞','–≠–∫–æ–ª–æ–≥–∏—è','–ì–∏—Å—Ç–æ–ª–æ–≥–∏—è'],a:1},
      {q:'–ú–µ—Ç–æ–¥, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –∏–∑—É—á–µ–Ω–∏–∏ —Ä–æ–¥–æ—Å–ª–æ–≤–Ω—ã—Ö:',opts:['–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω—ã–π','–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã–π'],a:0},
      {q:'–ú–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–æ–ª—å –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å—Ä–µ–¥—ã:',opts:['–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π'],a:0},
      {q:'–ú–µ—Ç–æ–¥, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∏–∑—É—á–∏—Ç—å –∫–∞—Ä–∏–æ—Ç–∏–ø —á–µ–ª–æ–≤–µ–∫–∞:',opts:['–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π'],a:1},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π –æ–±–º–µ–Ω–∞ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç?',opts:['–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π'],a:0},
      {q:'–ú–µ—Ç–æ–¥, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ –î–ù–ö:',opts:['–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã–π'],a:0},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –≤—ã—è–≤–ª—è–µ—Ç —Å—Ü–µ–ø–ª–µ–Ω–Ω–æ–µ —Å –ø–æ–ª–æ–º –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ?',opts:['–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω—ã–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π'],a:0},
      {q:'–°–∏–Ω–¥—Ä–æ–º –¢–µ—Ä–Ω–µ—Ä–∞ –º–æ–∂–Ω–æ –≤—ã—è–≤–∏—Ç—å –º–µ—Ç–æ–¥–æ–º:',opts:['–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–º','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–º','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–º','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–º'],a:1},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –∏–∑—É—á–∞–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç—å –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –≤ –ø–æ–ø—É–ª—è—Ü–∏–∏?',opts:['–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω–æ-—Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π','–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω—ã–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π'],a:1},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ä–∞–∑–≤–∏—Ç–∏–µ –æ–¥–Ω–æ—è–π—Ü–µ–≤—ã—Ö –∏ –¥–≤—É—è–π—Ü–µ–≤—ã—Ö –±–ª–∏–∑–Ω–µ—Ü–æ–≤?',opts:['–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω—ã–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π'],a:1},
      {q:'–ú–µ—Ç–æ–¥, –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–π –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Ñ–µ–Ω–∏–ª–∫–µ—Ç–æ–Ω—É—Ä–∏–∏:',opts:['–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã–π'],a:0},
      {q:'–ú–µ—Ç–æ–¥, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –≤—ã—è–≤–∏—Ç—å –º—É—Ç–∞—Ü–∏–∏ –≤ –î–ù–ö:',opts:['–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π'],a:2},
      {q:'–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å –Ω–∞—É–∫–∏ –≥–µ–Ω–µ—Ç–∏–∫–∏:',opts:['–î–∞—Ä–≤–∏–Ω','–ú–µ–Ω–¥–µ–ª—å','–ú–æ—Ä–≥–∞–Ω','–í–∞–≤–∏–ª–æ–≤'],a:1},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑—É—á–∏—Ç—å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–∑–Ω–∏ –≤ —Å–µ–º—å–µ?',opts:['–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π'],a:0},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≥–µ–Ω–æ–º–∞?',opts:['–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π'],a:0},
      {q:'–ü—Ä–∏ —Å–∏–Ω–¥—Ä–æ–º–µ –ö–ª–∞–π–Ω—Ñ–µ–ª—å—Ç–µ—Ä–∞ —É –º—É–∂—á–∏–Ω—ã:',opts:['46 —Ö—Ä–æ–º–æ—Å–æ–º','45 —Ö—Ä–æ–º–æ—Å–æ–º','47 —Ö—Ä–æ–º–æ—Å–æ–º (XXY)','48 —Ö—Ä–æ–º–æ—Å–æ–º'],a:2},
      {q:'–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–æ–ª–∏ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —Å—Ä–µ–¥—ã –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç:',opts:['–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π –º–µ—Ç–æ–¥','–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥'],a:2},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ —á–∞—â–µ –≤—Å–µ–≥–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç –¥–ª—è –º–µ–¥–∏–∫–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ–º–µ–π?',opts:['–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã–π'],a:1},
      {q:'–ú–µ—Ç–æ–¥, –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–π –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –Ω–∞—Å–µ–ª–µ–Ω–∏—è:',opts:['–ü–æ–ø—É–ª—è—Ü–∏–æ–Ω–Ω–æ-—Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π','–ë–ª–∏–∑–Ω–µ—Ü–æ–≤—ã–π','–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π'],a:0},
      {q:'–ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è —Å–∫—Ä—ã—Ç–æ–≥–æ –Ω–æ—Å–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π?',opts:['–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π','–¶–∏—Ç–æ–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ-–≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π','–ì–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–π'],a:2}
    ];


    const testArea = document.getElementById('test-area');
    const timerEl = document.getElementById('timer');
    let timerInterval = null; let timeLeft = 180; let testStarted=false; let testCompleted=false;

    // If already completed, lock test
    if(localStorage.getItem('gen_test_completed')){ testCompleted=true; }

    function renderQuestions(){
      testArea.innerHTML='';
      const qlist = selectedVariant==='2'?questionsVariant2:questionsVariant1;
      qlist.forEach((qq,idx)=>{
        const div = document.createElement('div'); div.className='question';
        let html = `<div><strong>${idx+1}. ${qq.q}</strong></div>`;
        qq.opts.forEach((opt,i)=>{
          html += `<label style='display:block;margin-top:6px'><input type='radio' name='q${idx}' value='${i}'> ${String.fromCharCode(97+i)}) ${opt}</label>`;
        });
        div.innerHTML = html; testArea.appendChild(div);
      });
    }

    function startTimer(){
      timeLeft = 180; updateTimer();
      timerInterval = setInterval(()=>{ timeLeft--; updateTimer(); if(timeLeft<=0){ clearInterval(timerInterval); finishTest(true); } },1000);
    }
    function updateTimer(){ const m = String(Math.floor(timeLeft/60)).padStart(2,'0'); const s = String(timeLeft%60).padStart(2,'0'); timerEl.innerText = `${m}:${s}`; }

    document.getElementById('start-test').addEventListener('click',()=>{
      if(testCompleted){ alert('–¢–µ—Å—Ç —É–∂–µ –ø—Ä–æ–π–¥–µ–Ω ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ø—Ä–æ—Ö–æ–¥ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.'); return; }
      const name = document.getElementById('student-name').value.trim();
      if(!selectedVariant){ alert('–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç —Ç–µ—Å—Ç–∞.'); return; }
      if(!name){ alert('–í–≤–µ–¥–∏—Ç–µ –∏–º—è.'); return; }
      // mark started & render questions
      testStarted=true; testArea.classList.remove('disabled'); renderQuestions();
      // disable switching answers on other tabs: keep state in localStorage
      localStorage.setItem('gen_test_in_progress',JSON.stringify({variant:selectedVariant,name,started:Date.now()}));
      startTimer();
    });

    function finishTest(timeOut=false){
      // compute score
      const qlist = selectedVariant==='2'?questionsVariant2:questionsVariant1;
      let score=0,answeredAll=true;
      qlist.forEach((qq,idx)=>{
        const r = document.querySelector(`input[name='q${idx}']:checked`);
        if(!r) answeredAll=false; else if(parseInt(r.value,10)===qq.a) score++;
      });
      testCompleted=true; testStarted=false;
      // disable inputs
      document.querySelectorAll('#test-area input').forEach(i=>i.disabled=true);
      document.getElementById('submit-test').disabled=true;
      // store completed flag so reload won't allow repeat
      localStorage.setItem('gen_test_completed',JSON.stringify({variant:selectedVariant,score,when:Date.now()}));
      localStorage.removeItem('gen_test_in_progress');
      document.getElementById('test-result').innerHTML = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${score} / ${qlist.length}. ${timeOut?'<em>–í—Ä–µ–º—è –≤—ã—à–ª–æ.</em>':''}`;
      if(timerInterval) clearInterval(timerInterval);
    }

    document.getElementById('submit-test').addEventListener('click',()=>{
      if(!testStarted){ alert('–°–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç".'); return; }
      if(confirm('–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã?')){ finishTest(false); }
    });

    // if completed previously, show message and block
    function testTabUpdateState(){
      if(localStorage.getItem('gen_test_completed')){
        const data = JSON.parse(localStorage.getItem('gen_test_completed'));
        document.getElementById('test-result').innerHTML = `–¢–µ—Å—Ç —É–∂–µ –ø—Ä–æ–π–¥–µ–Ω —Ä–∞–Ω–µ–µ. –†–µ–∑—É–ª—å—Ç–∞—Ç: ${data.score} –±–∞–ª–ª–æ–≤.`;
        document.getElementById('test-area').classList.add('disabled');
        document.getElementById('student-name').disabled=true; document.getElementById('start-test').disabled=true; document.getElementById('submit-test').disabled=true;
      } else if(localStorage.getItem('gen_test_in_progress')){
        // user started but maybe left page. Block changing answers
        const info = JSON.parse(localStorage.getItem('gen_test_in_progress'));
        selectedVariant = info.variant; variantsEls.forEach(v=>{ if(v.dataset.variant===selectedVariant) v.classList.add('selected'); else v.classList.remove('selected'); });
        renderQuestions(); // but disable inputs so they cannot change answers when switching tabs
        document.querySelectorAll('#test-area input').forEach(i=>i.disabled=true);
        document.getElementById('student-name').value = info.name; document.getElementById('student-name').disabled=true;
        document.getElementById('start-test').disabled=true;
        document.getElementById('submit-test').disabled=true;
        document.getElementById('test-result').innerText = '–¢–µ—Å—Ç –Ω–∞—á–∞—Ç ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã.';
      } else {
        // normal
        document.getElementById('test-area').classList.add('disabled');
        document.getElementById('student-name').disabled=false; document.getElementById('start-test').disabled=false; document.getElementById('submit-test').disabled=false;
      }
    }
    testTabUpdateState();

    // Prevent changing answers when switching: we enforce that if gen_test_in_progress exists, inputs disabled (see above). Also if test started, before switching we save in-progress state ‚Äî already done on start.

    // Save completed state on page unload if testCompleted
    window.addEventListener('beforeunload',()=>{
      if(testStarted){ // if student reloads while test active ‚Äî we consider it completed and block further attempts
        localStorage.setItem('gen_test_completed',JSON.stringify({variant:selectedVariant,score:0,when:Date.now()}));
        localStorage.removeItem('gen_test_in_progress');
      }
    });

    // Homework drawing
    const canvas = document.getElementById('drawCanvas'); const ctx = canvas.getContext('2d'); let drawing=false; let last={x:0,y:0};
    function setStroke(){ ctx.lineWidth = document.getElementById('thick').value; ctx.lineCap='round'; ctx.strokeStyle='#0b3'; }
    setStroke(); document.getElementById('thick').addEventListener('input',setStroke);
    canvas.addEventListener('mousedown',e=>{drawing=true; last = {x:e.offsetX,y:e.offsetY};});
    canvas.addEventListener('mousemove',e=>{ if(!drawing) return; ctx.beginPath(); ctx.moveTo(last.x,last.y); ctx.lineTo(e.offsetX,e.offsetY); ctx.stroke(); last={x:e.offsetX,y:e.offsetY}; });
    canvas.addEventListener('mouseup',()=>drawing=false); canvas.addEventListener('mouseleave',()=>drawing=false);
    document.getElementById('clear').addEventListener('click',()=>{ ctx.clearRect(0,0,canvas.width,canvas.height); });
    document.getElementById('save').addEventListener('click',()=>{ const data = canvas.toDataURL(); const a=document.createElement('a'); a.href=data; a.download='pedigree.png'; a.click(); });

    // initial small decoration: draw faint family-tree template hints
    function drawTemplate(){ ctx.save(); ctx.globalAlpha=0.12; ctx.strokeStyle='#070'; ctx.lineWidth=2; // three generation boxes
      ctx.strokeRect(20,40,120,40); ctx.strokeRect(180,40,120,40);
      ctx.strokeRect(400,20,120,40); ctx.strokeRect(400,120,120,40);
      ctx.strokeRect(260,200,120,40); ctx.strokeRect(480,200,120,40);
      ctx.restore();
    }
    drawTemplate();

    // Accessibility: keyboard variant selection
    document.addEventListener('keydown',e=>{ if(e.key==='1'){variantsEls[0].click()} if(e.key==='2'){variantsEls[1].click()} });

  </script>
</body>
</html>
